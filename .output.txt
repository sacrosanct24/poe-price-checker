========================= test session starts =========================
platform win32 -- Python 3.13.3, pytest-9.0.1, pluggy-1.6.0
PyQt6 6.10.0 -- Qt runtime 6.10.0 -- Qt compiled 6.10.0
rootdir: C:\Users\toddb\PycharmProjects\exilePriceCheck
configfile: pytest.ini
testpaths: tests
plugins: anyio-4.11.0, cov-7.0.0, mock-3.15.1, qt-4.5.0, timeout-2.4.0, xdist-3.8.0
timeout: 120.0s
timeout method: thread
timeout func_only: False
collected 2271 items
tests\acceptance\test_real_world.py ......................       [  0%]
tests\integration\core\test_app_context_league.py ..             [  1%]
tests\integration\gui\test_gui_copy_row.py ..                    [  1%]
tests\integration\gui\test_gui_details_and_status.py ..s.        [  1%]
tests\integration\gui\test_gui_export_and_copy_all_tsv.py s...   [  1%]
tests\integration\gui\test_gui_item_inspector_and_sources.py ... [  1%]
...                                                              [  1%]
tests\test_affix_tier_calculator.py ............................ [  2%]
...............                                                  [  3%]
tests\test_bis_system.py .................................       [  5%]
tests\test_build_archetype.py .................................. [  6%]
.                                                                [  6%]
tests\test_build_stat_calculator.py ........................     [  7%]
tests\test_clipboard_monitor.py ................................ [  9%]
..............                                                   [  9%]
tests\test_dps_impact_calculator.py ............................ [ 10%]
..........                                                       [ 11%]
tests\test_item_comparison_dialog.py ........................... [ 12%]
........                                                         [ 12%]
tests\test_loadout_selector.py ................                  [ 13%]
tests\test_mcp_server.py ........                                [ 14%]
tests\test_meta_analyzer.py .................................... [ 15%]
                                                                 [ 15%]
tests\test_parser_diagnostics.py ............                    [ 16%]
tests\test_poe2_data.py ........................................ [ 17%]
....................                                             [ 18%]
tests\test_poe_ninja_client.py ....................              [ 19%]
tests\test_poe_stash_api.py .......................              [ 20%]
tests\test_poewatch_api.py .                                     [ 20%]
tests\test_price_integrator.py ................................. [ 22%]
...............                                                  [ 22%]
tests\test_price_service_multi_source.py .......                 [ 23%]
tests\test_repoe_tier_provider.py .............................. [ 24%]
...................                                              [ 25%]
tests\test_results_table.py ...                                  [ 25%]
tests\test_shortcuts.py ...............................          [ 26%]
tests\test_skill_analyzer.py .............................       [ 28%]
tests\test_smart_trade_filters.py .....................          [ 28%]
tests\test_stash_valuator.py ................................... [ 30%]
...................                                              [ 31%]
tests\test_tree_comparison.py ................                   [ 32%]
tests\test_upgrade_calculator.py ..............................  [ 33%]
tests\unit\core\test_app_context.py .                            [ 33%]
tests\unit\core\test_arbitration_flag_integration.py ..          [ 33%]
tests\unit\core\test_build_comparison.py ....................ss  [ 34%]
tests\unit\core\test_build_library.py .......................... [ 35%]
..........                                                       [ 36%]
tests\unit\core\test_build_matcher.py .......................... [ 37%]
........                                                         [ 37%]
tests\unit\core\test_build_priorities.py ....................... [ 38%]
..........                                                       [ 39%]
tests\unit\core\test_config.py ................................. [ 40%]
.....                                                            [ 40%]
tests\unit\core\test_database.py ...........                     [ 41%]
tests\unit\core\test_database_edge_cases.py ...............      [ 41%]
tests\unit\core\test_derived_sources.py ..................       [ 42%]
tests\unit\core\test_display_policy_config_override.py ...       [ 42%]
tests\unit\core\test_enabled_sources_persistence.py ..           [ 42%]
tests\unit\core\test_game_data.py .............................. [ 44%]
.......                                                          [ 44%]
tests\unit\core\test_game_version.py ........................... [ 45%]
...                                                              [ 45%]
tests\unit\core\test_guide_gear_extractor.py ................... [ 46%]
...........                                                      [ 47%]
tests\unit\core\test_item_parser.py ..........                   [ 47%]
tests\unit\core\test_item_parser_item_class.py ......            [ 47%]
tests\unit\core\test_logging_setup.py .....                      [ 48%]
tests\unit\core\test_passive_tree_data.py ...................... [ 49%]
........                                                         [ 49%]
tests\unit\core\test_pob_integration.py ........................ [ 50%]
................................                                 [ 51%]
tests\unit\core\test_poe_oauth.py .............................. [ 53%]
......                                                           [ 53%]
tests\unit\core\test_price_arbitration.py ......                 [ 53%]
tests\unit\core\test_price_estimation_policy.py .....            [ 53%]
tests\unit\core\test_price_multi.py ....                         [ 54%]
tests\unit\core\test_price_rankings.py ......................... [ 55%]
.........................                                        [ 56%]
tests\unit\core\test_price_row_contract.py ....                  [ 56%]
tests\unit\core\test_price_service.py ...                        [ 56%]
tests\unit\core\test_price_service_basic.py ..                   [ 56%]
tests\unit\core\test_price_service_currency.py ..                [ 56%]
tests\unit\core\test_price_service_edge_cases.py .........       [ 57%]
tests\unit\core\test_price_service_rare_pricing.py ............. [ 57%]
.........................                                        [ 58%]
tests\unit\core\test_price_service_stats.py ....                 [ 59%]
tests\unit\core\test_price_trend_calculator.py ................. [ 59%]
.....                                                            [ 59%]
tests\unit\core\test_rare_item_evaluator.py .................... [ 60%]
................................                                 [ 62%]
tests\unit\core\test_result.py ................................. [ 63%]
                                                                 [ 63%]
tests\unit\core\test_secure_storage.py ......................... [ 64%]
.....                                                            [ 65%]
tests\unit\core\test_stash_grid_renderer.py .................... [ 65%]
..........                                                       [ 66%]
tests\unit\core\test_stash_scanner.py .......................... [ 67%]
.                                                                [ 67%]
tests\unit\core\test_structured_logging.py ...                   [ 67%]
tests\unit\core\test_undercut_source.py ................         [ 68%]
tests\unit\core\test_upgrade_finder.py ....................      [ 69%]
tests\unit\core\test_value_rules.py .....                        [ 69%]
tests\unit\data_sources\test_affix_data_provider.py ............ [ 70%]
........                                                         [ 70%]
tests\unit\data_sources\test_base_api.py ....................... [ 71%]
..............................                                   [ 72%]
tests\unit\data_sources\test_base_api_client_ttl_and_timeout.py . [ 72%]
..                                                               [ 72%]
tests\unit\data_sources\test_build_scrapers.py ................. [ 73%]
..................                                               [ 74%]
tests\unit\data_sources\test_cargo_api_client.py ............... [ 75%]
.................s..                                             [ 75%]
tests\unit\data_sources\test_mod_data_loader.py ................ [ 76%]
..........                                                       [ 77%]
tests\unit\data_sources\test_mod_database.py ................... [ 77%]
..................                                               [ 78%]
tests\unit\data_sources\test_poe_ninja_performance.py .........  [ 79%]
tests\unit\data_sources\test_poe_stash_api.py .................. [ 79%]
.............                                                    [ 80%]
tests\unit\data_sources\test_poeninja_gems_and_divcards.py ..... [ 80%]
.                                                                [ 80%]
tests\unit\data_sources\test_poeninja_leagues.py ...             [ 80%]
tests\unit\data_sources\test_poeprices.py .................s     [ 81%]
tests\unit\data_sources\test_rate_limiter.py ...                 [ 81%]
tests\unit\data_sources\test_rate_limiter_concurrency.py .       [ 81%]
tests\unit\data_sources\test_repoe_client.py ................... [ 82%]
............                                                     [ 83%]
tests\unit\data_sources\test_response_cache_metrics.py ..        [ 83%]
tests\unit\data_sources\test_response_cache_reentrancy.py .      [ 83%]
tests\unit\data_sources\test_response_cache_ttl.py .             [ 83%]
tests\unit\data_sources\test_retry_with_backoff.py ...           [ 83%]
tests\unit\data_sources\test_trade_api_source.py ..              [ 83%]
tests\unit\data_sources\test_trade_api_source_high_level.py .... [ 83%]
.                                                                [ 83%]
tests\unit\data_sources\test_trade_api_source_low_level.py ...   [ 83%]
tests\unit\data_sources\test_trade_api_source_more.py ...        [ 84%]
tests\unit\data_sources\test_trade_stat_ids.py ................. [ 84%]
...........                                                      [ 85%]
tests\unit\gui_qt\controllers\test_price_check_controller.py ... [ 85%]
................................                                 [ 86%]
tests\unit\gui_qt\controllers\test_theme_controller.py ......... [ 87%]
...............                                                  [ 87%]
tests\unit\gui_qt\dialogs\test_settings_dialog.py .............. [ 88%]
..........                                                       [ 88%]
tests\unit\gui_qt\services\test_system_tray_manager.py ......... [ 89%]
..........                                                       [ 89%]
tests\unit\gui_qt\services\test_window_manager.py .............. [ 90%]
...........                                                      [ 90%]
tests\unit\gui_qt\test_pinned_items_widget.py .................. [ 91%]
                                                                 [ 91%]
tests\unit\gui_qt\test_pob_panel.py .........................    [ 92%]
tests\unit\gui_qt\test_pyqt6_imports.py .......                  [ 93%]
tests\unit\gui_qt\test_results_table_widget.py .............     [ 93%]
tests\unit\gui_qt\test_shortcuts.py ............................ [ 94%]
...............                                                  [ 95%]
tests\unit\gui_qt\test_styles.py ............................... [ 96%]
................................                                 [ 98%]
tests\unit\gui_qt\widgets\test_poe_item_tooltip.py ............. [ 98%]
...                                                              [ 99%]
tests\unit\gui_qt\widgets\test_session_tabs.py ................. [ 99%]
.....                                                            [100%]
======================== slowest 20 durations =========================
9.31s call     tests/acceptance/test_real_world.py::TestUniquePricing::test_headhunter_is_expensive
3.94s call     tests/acceptance/test_real_world.py::TestUniquePricing::test_goldrim_price
3.84s call     tests/acceptance/test_real_world.py::TestUniquePricing::test_tabula_rasa_price
3.00s call     tests/unit/data_sources/test_base_api.py::TestBaseAPIClientRequests::test_make_request_handles_429_rate_limit
2.20s call     tests/unit/data_sources/test_base_api_client_ttl_and_timeout.py::test_endpoint_ttl_map_is_used_when_no_override
1.87s call     tests/unit/data_sources/test_base_api.py::TestRateLimiter::test_rate_limiter_thread_safety
1.50s call     tests/test_poe_stash_api.py::TestPoEStashClient::test_rate_limiting
1.40s call     tests/unit/data_sources/test_base_api.py::TestRetryWithBackoff::test_decorator_uses_exponential_backoff
1.20s call     tests/unit/data_sources/test_base_api.py::TestResponseCache::test_get_returns_none_after_expiry
1.20s call     tests/unit/data_sources/test_base_api.py::TestResponseCache::test_expired_items_removed_on_get
1.20s call     tests/unit/data_sources/test_base_api.py::TestResponseCache::test_set_with_custom_ttl
1.13s call     tests/acceptance/test_real_world.py::TestCurrencyPricing::test_mirror_most_expensive
1.11s call     tests/acceptance/test_real_world.py::TestGemPricing::test_enlighten_4_expensive
1.10s call     tests/unit/data_sources/test_base_api_client_ttl_and_timeout.py::test_per_request_ttl_override_expires_quickly
1.10s call     tests/unit/data_sources/test_response_cache_metrics.py::test_response_cache_ttl_expiry
1.06s call     tests/unit/data_sources/test_base_api.py::TestBaseAPIClientWrappers::test_post_does_not_cache
1.04s call     tests/unit/data_sources/test_base_api.py::TestBaseAPIClientCaching::test_cache_respects_use_cache_flag
1.03s call     tests/unit/data_sources/test_base_api.py::TestBaseAPIClientCaching::test_cache_distinguishes_different_endpoints
1.01s call     tests/unit/data_sources/test_base_api.py::TestBaseAPIClientCaching::test_cache_distinguishes_different_params
0.59s call     tests/acceptance/test_real_world.py::TestMultiSourceConsistency::test_divine_price_consistency
======================= short test summary info =======================
SKIPPED [1] tests\integration\gui\test_gui_details_and_status.py:155: Treeview row bbox not available in this environment.
SKIPPED [1] tests\integration\gui\test_gui_export_and_copy_all_tsv.py:91: Tkinter is not available or cannot be initialized in this environment.
SKIPPED [1] tests\unit\core\test_build_comparison.py:245: Could not fetch from Maxroll API: HTTPSConnectionPool(host='maxroll.gg', port=443): Max retries exceeded with url: /poe/api/pob/0nws0aiy (Caused by NameResolutionError("<urllib3.connection.HTTPSConnection object at 0x0000024982BB7250>: Failed to resolve 'maxroll.gg' ([Errno 11001] getaddrinfo failed)"))
SKIPPED [1] tests\unit\core\test_build_comparison.py:268: Could not fetch from Maxroll API: HTTPSConnectionPool(host='maxroll.gg', port=443): Max retries exceeded with url: /poe/api/pob/0nws0aiy (Caused by NameResolutionError("<urllib3.connection.HTTPSConnection object at 0x00000249F749B4D0>: Failed to resolve 'maxroll.gg' ([Errno 11001] getaddrinfo failed)"))
SKIPPED [1] tests\unit\data_sources\test_cargo_api_client.py:300: Map Fragment not in VALID_ITEM_CLASSES
SKIPPED [1] tests\unit\data_sources\test_poeprices.py:310: Integration test - requires live API
============= 2265 passed, 6 skipped in 60.13s (0:01:00) ==============